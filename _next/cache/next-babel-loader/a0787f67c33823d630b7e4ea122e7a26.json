{"ast":null,"code":"import Ripple from './ripple';\nimport { addClass, removeClass } from './utils';\nexport var DEFAULT_DURATION = 800;\nexport var DEFAULT_COLOR = 'rgba(33, 33, 33, 0.3)';\nexport default function createRipple(ele) {\n  var color = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'rgba(0, 0, 0, 0.1)';\n  var durantion = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : DEFAULT_DURATION;\n  var rippleCount = 0;\n\n  var init = function init(event) {\n    var rippleInstance;\n    if (!ele) return;\n    addClass(ele, 'react-ripple-wrapper');\n\n    var _ele$getBoundingClien = ele.getBoundingClientRect(),\n        top = _ele$getBoundingClien.top,\n        left = _ele$getBoundingClien.left,\n        width = _ele$getBoundingClien.width,\n        height = _ele$getBoundingClien.height;\n\n    var cx = event.clientX - left;\n    var cy = event.clientY - top;\n    var cr = Math.ceil(Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2)));\n    rippleInstance = new Ripple(cx, cy, cr, color, durantion);\n    rippleCount++;\n    ele.appendChild(rippleInstance.rippleEle);\n    rippleInstance.animateEle.beginElement();\n\n    var remove = function remove() {\n      if (!ele) return;\n      ele.removeEventListener('mouseup', remove);\n      ele.removeEventListener('mouseout', remove);\n      rippleInstance.fadeoutAnimateEle.beginElement();\n      setTimeout(function () {\n        rippleCount--;\n        ele.removeChild(rippleInstance.rippleEle);\n\n        if (rippleCount === 0) {\n          removeClass(ele, 'react-ripple-wrapper');\n        }\n      }, durantion);\n    };\n\n    ele.addEventListener('mouseup', remove);\n    ele.addEventListener('mouseout', remove);\n  };\n\n  ele && ele.addEventListener('mousedown', init);\n}","map":{"version":3,"sources":["/Users/daiwei/pr/react-website-next/components/Ripple/createRipple.ts"],"names":["Ripple","addClass","removeClass","DEFAULT_DURATION","DEFAULT_COLOR","createRipple","ele","color","durantion","rippleCount","init","event","rippleInstance","getBoundingClientRect","top","left","width","height","cx","clientX","cy","clientY","cr","Math","ceil","sqrt","pow","appendChild","rippleEle","animateEle","beginElement","remove","removeEventListener","fadeoutAnimateEle","setTimeout","removeChild","addEventListener"],"mappings":"AAAA,OAAOA,MAAP,MAEO,UAFP;AAIA,SACEC,QADF,EAEEC,WAFF,QAGO,SAHP;AAKA,OAAO,IAAMC,gBAAgB,GAAG,GAAzB;AACP,OAAO,IAAMC,aAAa,GAAG,uBAAtB;AAEP,eAAe,SAASC,YAAT,CAAuBC,GAAvB,EAA4H;AAAA,MAA5EC,KAA4E,uEAA5D,oBAA4D;AAAA,MAAtCC,SAAsC,uEAAlBL,gBAAkB;AACzI,MAAIM,WAAW,GAAG,CAAlB;;AAEA,MAAMC,IAAI,GAAG,SAAPA,IAAO,CAACC,KAAD,EAAwB;AACnC,QAAIC,cAAJ;AACA,QAAI,CAACN,GAAL,EAAU;AACVL,IAAAA,QAAQ,CAACK,GAAD,EAAM,sBAAN,CAAR;;AAHmC,gCAS/BA,GAAG,CAACO,qBAAJ,EAT+B;AAAA,QAKjCC,GALiC,yBAKjCA,GALiC;AAAA,QAMjCC,IANiC,yBAMjCA,IANiC;AAAA,QAOjCC,KAPiC,yBAOjCA,KAPiC;AAAA,QAQjCC,MARiC,yBAQjCA,MARiC;;AAWnC,QAAMC,EAAE,GAAGP,KAAK,CAACQ,OAAN,GAAgBJ,IAA3B;AACA,QAAMK,EAAE,GAAGT,KAAK,CAACU,OAAN,GAAgBP,GAA3B;AACA,QAAMQ,EAAE,GAAGC,IAAI,CAACC,IAAL,CAAUD,IAAI,CAACE,IAAL,CAAUF,IAAI,CAACG,GAAL,CAASV,KAAT,EAAgB,CAAhB,IAAqBO,IAAI,CAACG,GAAL,CAAST,MAAT,EAAiB,CAAjB,CAA/B,CAAV,CAAX;AACAL,IAAAA,cAAc,GAAG,IAAIZ,MAAJ,CAAWkB,EAAX,EAAeE,EAAf,EAAmBE,EAAnB,EAAuBf,KAAvB,EAA8BC,SAA9B,CAAjB;AAEAC,IAAAA,WAAW;AACXH,IAAAA,GAAG,CAACqB,WAAJ,CAAgBf,cAAc,CAACgB,SAA/B;AACChB,IAAAA,cAAc,CAACiB,UAAhB,CAAmCC,YAAnC;;AAEA,QAAMC,MAAM,GAAG,SAATA,MAAS,GAAM;AACnB,UAAI,CAACzB,GAAL,EAAU;AACVA,MAAAA,GAAG,CAAC0B,mBAAJ,CAAwB,SAAxB,EAAmCD,MAAnC;AACAzB,MAAAA,GAAG,CAAC0B,mBAAJ,CAAwB,UAAxB,EAAoCD,MAApC;AAECnB,MAAAA,cAAc,CAACqB,iBAAhB,CAA0CH,YAA1C;AAEAI,MAAAA,UAAU,CAAC,YAAM;AACfzB,QAAAA,WAAW;AACXH,QAAAA,GAAG,CAAC6B,WAAJ,CAAgBvB,cAAc,CAACgB,SAA/B;;AACA,YAAInB,WAAW,KAAK,CAApB,EAAuB;AACrBP,UAAAA,WAAW,CAACI,GAAD,EAAM,sBAAN,CAAX;AACD;AACF,OANS,EAMPE,SANO,CAAV;AAOD,KAdD;;AAgBAF,IAAAA,GAAG,CAAC8B,gBAAJ,CAAqB,SAArB,EAAgCL,MAAhC;AACAzB,IAAAA,GAAG,CAAC8B,gBAAJ,CAAqB,UAArB,EAAiCL,MAAjC;AACD,GAtCD;;AAwCAzB,EAAAA,GAAG,IAAIA,GAAG,CAAC8B,gBAAJ,CAAqB,WAArB,EAAkC1B,IAAlC,CAAP;AACD","sourcesContent":["import Ripple, {\n  IRipple\n} from './ripple'\n\nimport {\n  addClass,\n  removeClass\n} from './utils'\n\nexport const DEFAULT_DURATION = 800\nexport const DEFAULT_COLOR = 'rgba(33, 33, 33, 0.3)'\n\nexport default function createRipple (ele: HTMLElement | null, color: string = 'rgba(0, 0, 0, 0.1)', durantion: number = DEFAULT_DURATION) {\n  let rippleCount = 0\n\n  const init = (event: Event | any) => {\n    let rippleInstance: IRipple\n    if (!ele) return\n    addClass(ele, 'react-ripple-wrapper')\n    const {\n      top,\n      left,\n      width,\n      height\n    } = ele.getBoundingClientRect()\n\n    const cx = event.clientX - left;\n    const cy = event.clientY - top;\n    const cr = Math.ceil(Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2)));\n    rippleInstance = new Ripple(cx, cy, cr, color, durantion)\n\n    rippleCount ++\n    ele.appendChild(rippleInstance.rippleEle);\n    (rippleInstance.animateEle as any).beginElement()\n  \n    const remove = () => {\n      if (!ele) return\n      ele.removeEventListener('mouseup', remove);\n      ele.removeEventListener('mouseout', remove);\n\n      (rippleInstance.fadeoutAnimateEle as any).beginElement();\n  \n      setTimeout(() => {\n        rippleCount --\n        ele.removeChild(rippleInstance.rippleEle);\n        if (rippleCount === 0) {\n          removeClass(ele, 'react-ripple-wrapper')\n        }\n      }, durantion)\n    }\n\n    ele.addEventListener('mouseup', remove);\n    ele.addEventListener('mouseout', remove);\n  }\n\n  ele && ele.addEventListener('mousedown', init)\n}"]},"metadata":{},"sourceType":"module"}