{"ast":null,"code":"import Ripple from './ripple';\nimport { addClass, removeClass } from './utils';\nexport const DEFAULT_DURATION = 800;\nexport const DEFAULT_COLOR = 'rgba(33, 33, 33, 0.3)';\nexport default function createRipple(ele, color = 'rgba(0, 0, 0, 0.1)', durantion = DEFAULT_DURATION) {\n  let rippleCount = 0;\n\n  const init = event => {\n    let rippleInstance;\n    if (!ele) return;\n    addClass(ele, 'react-ripple-wrapper');\n    const {\n      top,\n      left,\n      width,\n      height\n    } = ele.getBoundingClientRect();\n    const cx = event.clientX - left;\n    const cy = event.clientY - top;\n    const cr = Math.ceil(Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2)));\n    rippleInstance = new Ripple(cx, cy, cr, color, durantion);\n    rippleCount++;\n    ele.appendChild(rippleInstance.rippleEle);\n    rippleInstance.animateEle.beginElement();\n\n    const remove = () => {\n      if (!ele) return;\n      ele.removeEventListener('mouseup', remove);\n      ele.removeEventListener('mouseout', remove);\n      rippleInstance.fadeoutAnimateEle.beginElement();\n      setTimeout(() => {\n        rippleCount--;\n        ele.removeChild(rippleInstance.rippleEle);\n\n        if (rippleCount === 0) {\n          removeClass(ele, 'react-ripple-wrapper');\n        }\n      }, durantion);\n    };\n\n    ele.addEventListener('mouseup', remove);\n    ele.addEventListener('mouseout', remove);\n  };\n\n  ele && ele.addEventListener('mousedown', init);\n}","map":{"version":3,"sources":["/Users/daiwei/pr/react-website-next/components/Ripple/createRipple.ts"],"names":["Ripple","addClass","removeClass","DEFAULT_DURATION","DEFAULT_COLOR","createRipple","ele","color","durantion","rippleCount","init","event","rippleInstance","top","left","width","height","getBoundingClientRect","cx","clientX","cy","clientY","cr","Math","ceil","sqrt","pow","appendChild","rippleEle","animateEle","beginElement","remove","removeEventListener","fadeoutAnimateEle","setTimeout","removeChild","addEventListener"],"mappings":"AAAA,OAAOA,MAAP,MAEO,UAFP;AAIA,SACEC,QADF,EAEEC,WAFF,QAGO,SAHP;AAKA,OAAO,MAAMC,gBAAgB,GAAG,GAAzB;AACP,OAAO,MAAMC,aAAa,GAAG,uBAAtB;AAEP,eAAe,SAASC,YAAT,CAAuBC,GAAvB,EAAgDC,KAAa,GAAG,oBAAhE,EAAsFC,SAAiB,GAAGL,gBAA1G,EAA4H;AACzI,MAAIM,WAAW,GAAG,CAAlB;;AAEA,QAAMC,IAAI,GAAIC,KAAD,IAAwB;AACnC,QAAIC,cAAJ;AACA,QAAI,CAACN,GAAL,EAAU;AACVL,IAAAA,QAAQ,CAACK,GAAD,EAAM,sBAAN,CAAR;AACA,UAAM;AACJO,MAAAA,GADI;AAEJC,MAAAA,IAFI;AAGJC,MAAAA,KAHI;AAIJC,MAAAA;AAJI,QAKFV,GAAG,CAACW,qBAAJ,EALJ;AAOA,UAAMC,EAAE,GAAGP,KAAK,CAACQ,OAAN,GAAgBL,IAA3B;AACA,UAAMM,EAAE,GAAGT,KAAK,CAACU,OAAN,GAAgBR,GAA3B;AACA,UAAMS,EAAE,GAAGC,IAAI,CAACC,IAAL,CAAUD,IAAI,CAACE,IAAL,CAAUF,IAAI,CAACG,GAAL,CAASX,KAAT,EAAgB,CAAhB,IAAqBQ,IAAI,CAACG,GAAL,CAASV,MAAT,EAAiB,CAAjB,CAA/B,CAAV,CAAX;AACAJ,IAAAA,cAAc,GAAG,IAAIZ,MAAJ,CAAWkB,EAAX,EAAeE,EAAf,EAAmBE,EAAnB,EAAuBf,KAAvB,EAA8BC,SAA9B,CAAjB;AAEAC,IAAAA,WAAW;AACXH,IAAAA,GAAG,CAACqB,WAAJ,CAAgBf,cAAc,CAACgB,SAA/B;AACChB,IAAAA,cAAc,CAACiB,UAAhB,CAAmCC,YAAnC;;AAEA,UAAMC,MAAM,GAAG,MAAM;AACnB,UAAI,CAACzB,GAAL,EAAU;AACVA,MAAAA,GAAG,CAAC0B,mBAAJ,CAAwB,SAAxB,EAAmCD,MAAnC;AACAzB,MAAAA,GAAG,CAAC0B,mBAAJ,CAAwB,UAAxB,EAAoCD,MAApC;AAECnB,MAAAA,cAAc,CAACqB,iBAAhB,CAA0CH,YAA1C;AAEAI,MAAAA,UAAU,CAAC,MAAM;AACfzB,QAAAA,WAAW;AACXH,QAAAA,GAAG,CAAC6B,WAAJ,CAAgBvB,cAAc,CAACgB,SAA/B;;AACA,YAAInB,WAAW,KAAK,CAApB,EAAuB;AACrBP,UAAAA,WAAW,CAACI,GAAD,EAAM,sBAAN,CAAX;AACD;AACF,OANS,EAMPE,SANO,CAAV;AAOD,KAdD;;AAgBAF,IAAAA,GAAG,CAAC8B,gBAAJ,CAAqB,SAArB,EAAgCL,MAAhC;AACAzB,IAAAA,GAAG,CAAC8B,gBAAJ,CAAqB,UAArB,EAAiCL,MAAjC;AACD,GAtCD;;AAwCAzB,EAAAA,GAAG,IAAIA,GAAG,CAAC8B,gBAAJ,CAAqB,WAArB,EAAkC1B,IAAlC,CAAP;AACD","sourcesContent":["import Ripple, {\n  IRipple\n} from './ripple'\n\nimport {\n  addClass,\n  removeClass\n} from './utils'\n\nexport const DEFAULT_DURATION = 800\nexport const DEFAULT_COLOR = 'rgba(33, 33, 33, 0.3)'\n\nexport default function createRipple (ele: HTMLElement | null, color: string = 'rgba(0, 0, 0, 0.1)', durantion: number = DEFAULT_DURATION) {\n  let rippleCount = 0\n\n  const init = (event: Event | any) => {\n    let rippleInstance: IRipple\n    if (!ele) return\n    addClass(ele, 'react-ripple-wrapper')\n    const {\n      top,\n      left,\n      width,\n      height\n    } = ele.getBoundingClientRect()\n\n    const cx = event.clientX - left;\n    const cy = event.clientY - top;\n    const cr = Math.ceil(Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2)));\n    rippleInstance = new Ripple(cx, cy, cr, color, durantion)\n\n    rippleCount ++\n    ele.appendChild(rippleInstance.rippleEle);\n    (rippleInstance.animateEle as any).beginElement()\n  \n    const remove = () => {\n      if (!ele) return\n      ele.removeEventListener('mouseup', remove);\n      ele.removeEventListener('mouseout', remove);\n\n      (rippleInstance.fadeoutAnimateEle as any).beginElement();\n  \n      setTimeout(() => {\n        rippleCount --\n        ele.removeChild(rippleInstance.rippleEle);\n        if (rippleCount === 0) {\n          removeClass(ele, 'react-ripple-wrapper')\n        }\n      }, durantion)\n    }\n\n    ele.addEventListener('mouseup', remove);\n    ele.addEventListener('mouseout', remove);\n  }\n\n  ele && ele.addEventListener('mousedown', init)\n}"]},"metadata":{},"sourceType":"module"}