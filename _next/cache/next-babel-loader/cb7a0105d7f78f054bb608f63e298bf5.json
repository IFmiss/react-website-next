{"ast":null,"code":"import _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport axios from 'axios'; // 200 成功\n// 100001 失败\n// 100002 超时\n\naxios.defaults.baseURL = 'https://www.daiwei.site/api';\naxios.defaults.timeout = 10000;\naxios.interceptors.request.use(function (config) {\n  return config;\n}, function (error) {\n  return _Promise.reject(error);\n});\naxios.interceptors.response.use(function (res) {\n  // const data: IResInfo = res.data\n  if (!res) {\n    return _Promise.reject('no response');\n  }\n\n  if (res.data && res.data.code !== 200) {\n    return _Promise.reject(res);\n  }\n\n  return _Promise.resolve(res);\n});\nexport default axios;","map":{"version":3,"sources":["/Users/daiwei/pr/react-website-next/utils/req.ts"],"names":["axios","defaults","baseURL","timeout","interceptors","request","use","config","error","reject","response","res","data","code","resolve"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CAEA;AACA;AACA;;AAUAA,KAAK,CAACC,QAAN,CAAeC,OAAf,GAAyB,6BAAzB;AACAF,KAAK,CAACC,QAAN,CAAeE,OAAf,GAAyB,KAAzB;AAEAH,KAAK,CAACI,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CACE,UAAAC,MAAM,EAAI;AACR,SAAOA,MAAP;AACD,CAHH,EAIE,UAAAC,KAAK,EAAI;AACP,SAAO,SAAQC,MAAR,CAAeD,KAAf,CAAP;AACD,CANH;AASAR,KAAK,CAACI,YAAN,CAAmBM,QAAnB,CAA4BJ,GAA5B,CAAgC,UAACK,GAAD,EAAmB;AAC/C;AACA,MAAI,CAACA,GAAL,EAAU;AACR,WAAO,SAAQF,MAAR,CAAe,aAAf,CAAP;AACD;;AAED,MAAIE,GAAG,CAACC,IAAJ,IAAYD,GAAG,CAACC,IAAJ,CAASC,IAAT,KAAkB,GAAlC,EAAuC;AACrC,WAAO,SAAQJ,MAAR,CAAeE,GAAf,CAAP;AACD;;AAED,SAAO,SAAQG,OAAR,CAAgBH,GAAhB,CAAP;AACD,CAXH;AAcA,eAAeX,KAAf","sourcesContent":["import axios from 'axios'\n\n// 200 成功\n// 100001 失败\n// 100002 超时\n\ntype RES_CODE = 200 | 100001 | 100002\n\ninterface IResInfo<T> {\n  code: RES_CODE,\n  msg: string,\n  result: T\n}\n\naxios.defaults.baseURL = 'https://www.daiwei.site/api'\naxios.defaults.timeout = 10000\n\naxios.interceptors.request.use(\n  config => {\n    return config\n  },\n  error => {\n    return Promise.reject(error)\n  }\n)\n\naxios.interceptors.response.use((res: any): any => {\n    // const data: IResInfo = res.data\n    if (!res) {\n      return Promise.reject('no response')\n    }\n\n    if (res.data && res.data.code !== 200) {\n      return Promise.reject(res)\n    }\n  \n    return Promise.resolve(res)\n  }\n)\n\nexport default axios\n"]},"metadata":{},"sourceType":"module"}