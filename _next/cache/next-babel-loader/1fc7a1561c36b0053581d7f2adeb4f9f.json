{"ast":null,"code":"import _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/daiwei/pr/react-website-next/pages/blog/detail/index.tsx\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Layout from '@components/Layout';\nimport { ARTICLE_DETAIL } from '@constance/api';\nimport classNames from 'classnames';\nimport { PROJECT_NAME } from '@constance/index';\nimport http from '@utils/req';\nimport ReactMarkdown from 'react-markdown';\nimport './detail.less';\nimport CodeBlock from \"@components/CodeBlock\";\n\nvar BlogDetail = function BlogDetail(_ref) {\n  var detail = _ref.detail,\n      prev = _ref.prev,\n      next = _ref.next;\n  var classString = classNames(_defineProperty({}, \"\".concat(PROJECT_NAME, \"-blog-detail\"), true));\n  return detail && detail.id ? __jsx(Layout, {\n    title: detail.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, __jsx(\"h1\", {\n    className: \"\".concat(classString, \"-title\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, detail.name), __jsx(ReactMarkdown, {\n    className: classString,\n    source: detail.content,\n    escapeHtml: false,\n    renderers: {\n      code: CodeBlock\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"\".concat(classString, \"-entry\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    className: \"\".concat(classString, \"-entry-prev\"),\n    onClick: handleGo.bind(null, prev),\n    title: prev.name || '',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, prev.name ? \"\\u4E0A\\u4E00\\u7BC7 : \".concat(prev.name) : ''), __jsx(\"a\", {\n    className: \"\".concat(classString, \"-entry-next\"),\n    onClick: handleGo.bind(null, next),\n    title: next.name || '',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, next.name ? \"\\u4E0B\\u4E00\\u7BC7 : \".concat(next.name) : ''))) : __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, \"\\u52A0\\u8F7D\\u4E2D...\");\n};\n\nBlogDetail.getInitialProps = function _callee(ctx) {\n  var id, _ref2, data;\n\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          id = ctx.query.id;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(http.get(\"\".concat(ARTICLE_DETAIL, \"/\").concat(id)));\n\n        case 3:\n          _ref2 = _context.sent;\n          data = _ref2.data;\n          return _context.abrupt(\"return\", {\n            detail: data.result && data.result.detail || {},\n            next: data.result && data.result.next || null,\n            prev: data.result && data.result.prev || null\n          });\n\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, _Promise);\n};\n\nexport default BlogDetail;","map":{"version":3,"sources":["/Users/daiwei/pr/react-website-next/pages/blog/detail/index.tsx"],"names":["React","Layout","ARTICLE_DETAIL","classNames","PROJECT_NAME","http","ReactMarkdown","CodeBlock","BlogDetail","detail","prev","next","classString","id","name","content","code","handleGo","bind","getInitialProps","ctx","query","get","data","result"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {\n  NextPage\n} from 'next'\nimport Layout from '@components/Layout'\nimport {\n  ARTICLE_DETAIL\n} from '@constance/api'\nimport classNames from 'classnames'\nimport {\n  PROJECT_NAME\n} from '@constance/index'\nimport http from '@utils/req'\nimport ReactMarkdown from 'react-markdown'\nimport './detail.less'\nimport CodeBlock from \"@components/CodeBlock\";\n\ninterface IBlogListCategorieOrTag {\n  id: string;\n  name: string;\n}\n\ninterface IBlogDetail {\n  id: string;\n  name: string;\n  readCount: string;\n  editDate: string;\n  createDate: string;\n  tagLists: IBlogListCategorieOrTag[];\n  content: string;\n}\n\ninterface IBlogPrevNext {\n  id: string | null;\n  name: string | null;\n}\n\ninterface BlogDetailProps {\n  detail: IBlogDetail,\n  next: IBlogPrevNext,\n  prev: IBlogPrevNext\n}\n\nconst BlogDetail: NextPage<BlogDetailProps, {}> = ({ detail, prev, next }) => {\n  const classString = classNames({\n    [`${PROJECT_NAME}-blog-detail`]: true\n  })\n  return (\n    (\n      detail && detail.id ? (\n        <Layout title={detail.name}>\n          <h1 className={`${classString}-title`}>{detail.name}</h1>\n          <ReactMarkdown className={classString}\n                      source={detail.content}\n                      escapeHtml={false}\n                      renderers={{\n                        code: CodeBlock\n                      }}/>\n          <div className={`${classString}-entry`}>\n            <a className={`${classString}-entry-prev`}\n                onClick={handleGo.bind(null, prev)}\n                title={prev.name || ''}>\n              { prev.name ? `上一篇 : ${prev.name}` : '' }\n            </a>\n\n            <a className={`${classString}-entry-next`}\n                onClick={handleGo.bind(null, next)}\n                title={next.name || ''}>\n              { next.name ? `下一篇 : ${next.name}` : '' }\n            </a>\n          </div>\n        </Layout>\n      ) : (\n        <div>加载中...</div>\n      )\n    )\n  )\n}\n\nBlogDetail.getInitialProps = async (ctx) => {\n  const { id }  = ctx.query\n  const { data } = await http.get(`${ARTICLE_DETAIL}/${id}`)\n  return {\n    detail: data.result && data.result.detail || {},\n    next: data.result && data.result.next || null,\n    prev: data.result && data.result.prev || null\n  }\n}\nexport default BlogDetail\n"]},"metadata":{},"sourceType":"module"}