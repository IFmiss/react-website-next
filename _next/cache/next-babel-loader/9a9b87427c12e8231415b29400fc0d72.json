{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport Layout from '@components/Layout';\nimport { ARTICLE_DETAIL } from '@constance/api';\nimport classNames from 'classnames';\nimport { PROJECT_NAME } from '@constance/index';\nimport http from '@utils/req';\nimport ReactMarkdown from 'react-markdown';\nimport './detail.less';\nimport CodeBlock from \"@components/CodeBlock\";\nimport Link from 'next/link';\nimport MainAction from '@root/store/actions/index';\nimport { connect } from 'react-redux';\n\nvar BlogDetail = function BlogDetail(props) {\n  var detail = props.detail,\n      prev = props.prev,\n      next = props.next;\n  var classString = classNames(_defineProperty({}, \"\".concat(PROJECT_NAME, \"-blog-detail\"), true));\n  useEffect(function () {\n    eleToTop();\n  }, []);\n\n  var eleToTop = function eleToTop() {\n    var ele = document.getElementById('dw-next-container');\n\n    if (ele) {\n      ele.scrollTop = 0;\n    }\n  };\n\n  return detail && detail.id ? __jsx(Layout, {\n    title: detail.name\n  }, __jsx(\"div\", {\n    className: classString\n  }, __jsx(\"h1\", {\n    className: \"\".concat(classString, \"-title\")\n  }, detail.name), __jsx(ReactMarkdown, {\n    source: detail.content,\n    escapeHtml: false,\n    renderers: {\n      code: CodeBlock\n    }\n  }), __jsx(\"div\", {\n    className: \"\".concat(classString, \"-entry\")\n  }, prev && prev.id ? __jsx(Link, {\n    href: \"/blog/detail?id=\".concat(prev.id)\n  }, __jsx(\"a\", {\n    className: \"\".concat(classString, \"-entry-prev\"),\n    title: prev.name || ''\n  }, prev.name ? \"\\u4E0A\\u4E00\\u7BC7 : \".concat(prev.name) : '')) : null, next && next.id ? __jsx(Link, {\n    href: \"/blog/detail?id=\".concat(next.id)\n  }, __jsx(\"a\", {\n    className: \"\".concat(classString, \"-entry-next\"),\n    title: next.name || ''\n  }, next.name ? \"\\u4E0B\\u4E00\\u7BC7 : \".concat(next.name) : '')) : null))) : __jsx(\"div\", null, \"\\u52A0\\u8F7D\\u4E2D...\");\n};\n\nBlogDetail.getInitialProps = function _callee(ctx) {\n  var id, _ref, data;\n\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          id = ctx.query.id;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(http.get(\"\".concat(ARTICLE_DETAIL, \"/\").concat(id)));\n\n        case 3:\n          _ref = _context.sent;\n          data = _ref.data;\n          return _context.abrupt(\"return\", {\n            detail: data.result && data.result.detail || {},\n            next: data.result && data.result.next || null,\n            prev: data.result && data.result.prev || null\n          });\n\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nvar mapState = function mapState(state) {\n  return {\n    containerEle: state.base.containerEle\n  };\n};\n\nvar mapDispatch = MainAction;\nexport default connect(mapState, mapDispatch)(BlogDetail);","map":{"version":3,"sources":["/Users/daiwei/pr/react-website-next/pages/blog/detail/index.tsx"],"names":["React","useEffect","Layout","ARTICLE_DETAIL","classNames","PROJECT_NAME","http","ReactMarkdown","CodeBlock","Link","MainAction","connect","BlogDetail","props","detail","prev","next","classString","eleToTop","ele","document","getElementById","scrollTop","id","name","content","code","getInitialProps","ctx","query","get","data","result","mapState","state","containerEle","base","mapDispatch"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAIA,OAAOC,MAAP,MAAmB,oBAAnB;AACA,SACEC,cADF,QAEO,gBAFP;AAGA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SACEC,YADF,QAEO,kBAFP;AAGA,OAAOC,IAAP,MAAiB,YAAjB;AACA,OAAOC,aAAP,MAA0B,gBAA1B;AACA,OAAO,eAAP;AACA,OAAOC,SAAP,MAAsB,uBAAtB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AAKA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,SAASC,OAAT,QAAwB,aAAxB;;AA4BA,IAAMC,UAAyC,GAAG,SAA5CA,UAA4C,CAACC,KAAD,EAAW;AAAA,MACnDC,MADmD,GAC5BD,KAD4B,CACnDC,MADmD;AAAA,MAC3CC,IAD2C,GAC5BF,KAD4B,CAC3CE,IAD2C;AAAA,MACrCC,IADqC,GAC5BH,KAD4B,CACrCG,IADqC;AAE3D,MAAMC,WAAW,GAAGb,UAAU,+BACxBC,YADwB,mBACK,IADL,EAA9B;AAIAJ,EAAAA,SAAS,CAAC,YAAM;AACdiB,IAAAA,QAAQ;AACT,GAFQ,EAEN,EAFM,CAAT;;AAIA,MAAMA,QAAQ,GAAG,SAAXA,QAAW,GAAM;AACrB,QAAMC,GAAG,GAAGC,QAAQ,CAACC,cAAT,CAAwB,mBAAxB,CAAZ;;AACA,QAAIF,GAAJ,EAAS;AACPA,MAAAA,GAAG,CAACG,SAAJ,GAAgB,CAAhB;AACD;AACF,GALD;;AAOA,SAEIR,MAAM,IAAIA,MAAM,CAACS,EAAjB,GACE,MAAC,MAAD;AAAQ,IAAA,KAAK,EAAET,MAAM,CAACU;AAAtB,KACE;AAAK,IAAA,SAAS,EAAEP;AAAhB,KACE;AAAI,IAAA,SAAS,YAAKA,WAAL;AAAb,KAAwCH,MAAM,CAACU,IAA/C,CADF,EAEE,MAAC,aAAD;AAAe,IAAA,MAAM,EAAEV,MAAM,CAACW,OAA9B;AACY,IAAA,UAAU,EAAE,KADxB;AAEY,IAAA,SAAS,EAAE;AACTC,MAAAA,IAAI,EAAElB;AADG;AAFvB,IAFF,EAOE;AAAK,IAAA,SAAS,YAAKS,WAAL;AAAd,KAEIF,IAAI,IAAIA,IAAI,CAACQ,EAAb,GACE,MAAC,IAAD;AAAM,IAAA,IAAI,4BAAqBR,IAAI,CAACQ,EAA1B;AAAV,KACE;AAAG,IAAA,SAAS,YAAKN,WAAL,gBAAZ;AACI,IAAA,KAAK,EAAEF,IAAI,CAACS,IAAL,IAAa;AADxB,KAEIT,IAAI,CAACS,IAAL,kCAAqBT,IAAI,CAACS,IAA1B,IAAmC,EAFvC,CADF,CADF,GAOI,IATR,EAYIR,IAAI,IAAIA,IAAI,CAACO,EAAb,GACE,MAAC,IAAD;AAAM,IAAA,IAAI,4BAAqBP,IAAI,CAACO,EAA1B;AAAV,KACE;AAAG,IAAA,SAAS,YAAKN,WAAL,gBAAZ;AACI,IAAA,KAAK,EAAED,IAAI,CAACQ,IAAL,IAAa;AADxB,KAEIR,IAAI,CAACQ,IAAL,kCAAqBR,IAAI,CAACQ,IAA1B,IAAmC,EAFvC,CADF,CADF,GAOI,IAnBR,CAPF,CADF,CADF,GAkCE,2CApCN;AAwCD,CAzDD;;AA2DAZ,UAAU,CAACe,eAAX,GAA6B,iBAAOC,GAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AACnBL,UAAAA,EADmB,GACXK,GAAG,CAACC,KADO,CACnBN,EADmB;AAAA;AAAA,2CAEJjB,IAAI,CAACwB,GAAL,WAAY3B,cAAZ,cAA8BoB,EAA9B,EAFI;;AAAA;AAAA;AAEnBQ,UAAAA,IAFmB,QAEnBA,IAFmB;AAAA,2CAGpB;AACLjB,YAAAA,MAAM,EAAEiB,IAAI,CAACC,MAAL,IAAeD,IAAI,CAACC,MAAL,CAAYlB,MAA3B,IAAqC,EADxC;AAELE,YAAAA,IAAI,EAAEe,IAAI,CAACC,MAAL,IAAeD,IAAI,CAACC,MAAL,CAAYhB,IAA3B,IAAmC,IAFpC;AAGLD,YAAAA,IAAI,EAAEgB,IAAI,CAACC,MAAL,IAAeD,IAAI,CAACC,MAAL,CAAYjB,IAA3B,IAAmC;AAHpC,WAHoB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAA7B;;AAUA,IAAMkB,QAAQ,GAAG,SAAXA,QAAW,CAACC,KAAD;AAAA,SAAoB;AACnCC,IAAAA,YAAY,EAAED,KAAK,CAACE,IAAN,CAAWD;AADU,GAApB;AAAA,CAAjB;;AAIA,IAAME,WAAW,GAAG3B,UAApB;AAEA,eAAeC,OAAO,CAACsB,QAAD,EAAWI,WAAX,CAAP,CAA+BzB,UAA/B,CAAf","sourcesContent":["import React, { useEffect } from 'react'\nimport {\n  NextPage\n} from 'next'\nimport Layout from '@components/Layout'\nimport {\n  ARTICLE_DETAIL\n} from '@constance/api'\nimport classNames from 'classnames'\nimport {\n  PROJECT_NAME\n} from '@constance/index'\nimport http from '@utils/req'\nimport ReactMarkdown from 'react-markdown'\nimport './detail.less'\nimport CodeBlock from \"@components/CodeBlock\";\nimport Link from 'next/link'\n\nimport { \n  IStore\n} from '@store/types';\nimport MainAction from '@root/store/actions/index'\nimport { connect } from 'react-redux'\n\ninterface IBlogListCategorieOrTag {\n  id: string;\n  name: string;\n}\n\ninterface IBlogDetail {\n  id: string;\n  name: string;\n  readCount: string;\n  editDate: string;\n  createDate: string;\n  tagLists: IBlogListCategorieOrTag[];\n  content: string;\n}\n\ninterface IBlogPrevNext {\n  id: string | null;\n  name: string | null;\n}\n\ninterface BlogDetailProps {\n  detail: IBlogDetail,\n  next: IBlogPrevNext,\n  prev: IBlogPrevNext\n}\n\nconst BlogDetail: NextPage<BlogDetailProps, {}> = (props) => {\n  const { detail, prev, next } = props\n  const classString = classNames({\n    [`${PROJECT_NAME}-blog-detail`]: true\n  })\n\n  useEffect(() => {\n    eleToTop()\n  }, [])\n  \n  const eleToTop = () => {\n    const ele = document.getElementById('dw-next-container')\n    if (ele) {\n      ele.scrollTop = 0\n    }\n  }\n\n  return (\n    (\n      detail && detail.id ? (\n        <Layout title={detail.name}>\n          <div className={classString}>\n            <h1 className={`${classString}-title`}>{detail.name}</h1>\n            <ReactMarkdown source={detail.content}\n                        escapeHtml={false}\n                        renderers={{\n                          code: CodeBlock\n                        }}/>\n            <div className={`${classString}-entry`}>\n              {\n                prev && prev.id ? (\n                  <Link href={`/blog/detail?id=${prev.id}`}>\n                    <a className={`${classString}-entry-prev`}\n                        title={prev.name || ''}>\n                      { prev.name ? `上一篇 : ${prev.name}` : '' }\n                    </a>\n                  </Link>\n                ) : null\n              }\n              {\n                next && next.id ? (\n                  <Link href={`/blog/detail?id=${next.id}`}>\n                    <a className={`${classString}-entry-next`}\n                        title={next.name || ''}>\n                      { next.name ? `下一篇 : ${next.name}` : '' }\n                    </a>\n                  </Link >\n                ) : null\n              }\n            </div>\n          </div>\n        </Layout>\n      ) : (\n        <div>加载中...</div>\n      )\n    )\n  )\n}\n\nBlogDetail.getInitialProps = async (ctx) => {\n  const { id }  = ctx.query\n  const { data } = await http.get(`${ARTICLE_DETAIL}/${id}`)\n  return {\n    detail: data.result && data.result.detail || {},\n    next: data.result && data.result.next || null,\n    prev: data.result && data.result.prev || null\n  }\n}\n\nconst mapState = (state: IStore) => ({ \n  containerEle: state.base.containerEle\n })\n\nconst mapDispatch = MainAction\n\nexport default connect(mapState, mapDispatch)(BlogDetail)\n"]},"metadata":{},"sourceType":"module"}